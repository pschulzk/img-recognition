<div class="content mat-app-background" [class.dark-theme]="isDarkTheme">
  <mat-toolbar color="primary">
    <!-- <button mat-icon-button aria-label="Example icon-button with menu icon">
      <mat-icon>menu</mat-icon>
    </button> -->
    <span class="title">Image Recognition</span>
    
    <span class="spacer"></span>
    <div class="flex-stretch"></div>

    <!-- UPLOAD -->
    <input #imgInput hidden="true" type="file" onclick="this.value=null" (change)="imgInputChange($event)" accept=".jpg"/>
    <button
      mat-raised-button
      color="primary"
      (click)="imgInput.click()"
    >
      <mat-icon>upload</mat-icon>
      Upload Image
    </button>

    <!-- RESET -->
    <button
      mat-raised-button
      color="transparent"
      aria-label="Redo"
      (click)="reset()"
    >
      <mat-icon>refresh</mat-icon>
      Reset
    </button>

    <!-- HELP -->
    <button
      mat-raised-button
      color="primary"
      (click)="openDialog()"
    >
      <mat-icon>help_outlined</mat-icon> 
      Info
    </button>

    <!-- TOGGLE DARK MODE -->
    <section class="toolbar-section">
      <mat-icon>light_mode</mat-icon>
      <div class="__togge-container">
        <mat-slide-toggle
          color="primary"
          [checked]="isDarkTheme"
          (change)="themeToggleChange($event)">
        </mat-slide-toggle>
      </div>
      <mat-icon>bedtime</mat-icon>
    </section>
  </mat-toolbar>

  <div class="wrapper">
    <div
      *ngIf="isLoading$ | async"
      @rowCollapseAnimation
      class="spinner-container"
    >
      <mat-spinner></mat-spinner>
    </div>

    <div class="container">
      <br>

      <p
        *ngIf="errorRemoteServiceUnavailable$ | async"
        @rowCollapseAnimation
        class="mat-error"
      >
        ERROR: Remote service is currently not available. Please try again later.
      </p>

      <p
        *ngIf="errorHasNoPredictions$ | async"
        @rowCollapseAnimation
        class="mat-error"
      >
        ERROR: No objects could be identified. Please try again or try another image.
      </p>

      <fbn-image-viewer
        [isLoading]="(isLoading$ | async) || true"
        [imgUrl]="imgUrl"
        [objectDetections]="(objectDetections$ | async) || []"
        (clickPlaceholder)="imgInput.click()"
      >
      </fbn-image-viewer>
    </div>
  </div>
</div>
