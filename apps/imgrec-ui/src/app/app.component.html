<div class="content mat-app-background" [class.dark-theme]="isDarkTheme">
  <mat-toolbar color="primary">
    <!-- <button mat-icon-button aria-label="Example icon-button with menu icon">
      <mat-icon>menu</mat-icon>
    </button> -->
    <span class="title">Image Recognition</span>
    
    <span class="spacer"></span>
    <div class="flex-stretch"></div>

    <!-- UPLOAD IMAGE -->
    <input #imageInput hidden="true" type="file" onclick="this.value=null" (change)="imageInputChange($event)" accept=".jpg"/>
    <button
      mat-raised-button
      color="primary"
      (click)="imageInput.click()"
    >
      <mat-icon>upload</mat-icon>
      Upload Image
    </button>

    <!-- UPLOAD VIDEO -->
    <input #videoInput hidden="true" type="file" onclick="this.value=null" (change)="videoInputChange($event)" accept=".mp4"/>
    <button
      mat-raised-button
      color="primary"
      (click)="videoInput.click()"
    >
      <mat-icon>upload</mat-icon>
      Upload Video
    </button>

    <!-- RESET -->
    <button
      mat-raised-button
      color="transparent"
      aria-label="Redo"
      (click)="reset()"
    >
      <mat-icon>refresh</mat-icon>
      Reset
    </button>

    <!-- HELP -->
    <button
      mat-raised-button
      color="primary"
      (click)="openDialog()"
    >
      <mat-icon>help_outlined</mat-icon> 
      Info
    </button>

    <!-- TOGGLE DARK MODE -->
    <section class="toolbar-section">
      <mat-icon>light_mode</mat-icon>
      <div class="__togge-container">
        <mat-slide-toggle
          color="primary"
          [checked]="isDarkTheme"
          (change)="themeToggleChange($event)">
        </mat-slide-toggle>
      </div>
      <mat-icon>bedtime</mat-icon>
    </section>
  </mat-toolbar>

  <div class="wrapper">
    <div
      *ngIf="isLoading$ | async"
      @rowCollapseAnimation
      class="spinner-container"
    >
      <mat-spinner></mat-spinner>
    </div>

    <div class="container">
      <br>

      <p
        *ngIf="errorRemoteServiceUnavailable$ | async"
        @rowCollapseAnimation
        class="mat-error"
      >
        ERROR: Remote service is currently not available. Please try again later.
      </p>

      <p
        *ngIf="errorHasNoPredictions$ | async"
        @rowCollapseAnimation
        class="mat-error"
      >
        ERROR: No objects could be identified. Please try again or try another image.
      </p>

      <fbn-image-viewer
        *ngIf="imageUrl$ | async"
        [isLoading]="(isLoading$ | async) || false"
        [config]="imageViewerConfig"
        (clickPlaceholder)="imageInput.click()"
      >
      </fbn-image-viewer>

      <fbn-video-viewer
        *ngIf="videoUrl$ | async"
        [isLoading]="(isLoading$ | async) || false"
        [config]="videoViewerConfig"
        (clickPlaceholder)="videoInput.click()"
      >
      </fbn-video-viewer>
    </div>
  </div>
</div>
